<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/StyleConvocatoria.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
    crossorigin="anonymous"></script>
    <title>FCyT Convocatorias</title>
</head>
<body>
  <div class="navegacione">
    <nav class="navbar navbar-expand-lg static-top">
        <div class="container">
          <a class="navbar-brand" href="#">
            <img src="../img/logo-fcyt.png" class="logoFcyt" alt="...">
          </a>
          <div class="collapse navbar-collapse text-light" id="navbarSupportedContent">
            <ul class="navbar-nav ">
              <li class="nav-item dropdown col-3">
                <a class="nav-link dropdown text-light " href="#" id="navbarDropdown" role="button"
                  data-bs-toggle="dropdown" aria-expanded="false">
                  INICIO
                </a>
              </li>
              <li class="nav-item dropdown col-3">
                <a class="nav-link dropdown text-light" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
                  aria-expanded="false">
                  ADMISION
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="#">Examen</a></li>
                  <li><a class="dropdown-item" href="#">Curso Propedeutico</a></li>
                  <li><a class="dropdown-item" href="#">Conocimiento</a></li>
                  <li><a class="dropdown-item" href="../html/Banco.html">Banco de Preguntas</a></li>
                  <li><a class="dropdown-item" href="#">Resultados</a></li>
                  <li>
                    <hr class="dropdown-divider">
                  </li>
                  <li><a class="dropdown-item" href="#">Inscripcion</a></li>
                </ul>
              </li>
              <li class="nav-item dropdown col-3">
                <a class="nav-link dropdown text-light" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
                  aria-expanded="false">
                  PREGRADO
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="#">Nuestras Carreras</a></li>
                  <li><a class="dropdown-item" href="#">Modalidad de graduacion</a></li>
                  <li><a class="dropdown-item" href="#">Curso de Invierno</a></li>
                  <li><a class="dropdown-item" href="#">Curso de Verano</a></li>
                  <li>
                    <hr class="dropdown-divider">
                  </li>
                  <li><a class="dropdown-item" href="#">Tramites</a></li>
                </ul>
              </li>
              <li class="nav-item dropdown col-3">
                <a class="nav-link dropdown text-light" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
                  aria-expanded="false">
                  POSGRADO
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="#">Action</a></li>
                  <li><a class="dropdown-item" href="#">Another action</a></li>
                  <li>
                    <hr class="dropdown-divider">
                  </li>
                  <li><a class="dropdown-item" href="#">Something else here</a></li>
                </ul>
              </li>
              <li class="nav-item dropdown col-3">
                <a class="nav-link dropdown text-light" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
                  aria-expanded="false">
                  INVESTIGACION
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="#">Action</a></li>
                  <li><a class="dropdown-item" href="#">Another action</a></li>
                  <li>
                    <hr class="dropdown-divider">
                  </li>
                  <li><a class="dropdown-item" href="#">Something else here</a></li>
                </ul>
              </li>
              <li class="nav-item dropdown col-3">
                <a class="nav-link dropdown text-light q q" href="#" id="navbarDropdown" role="button"
                  data-bs-toggle="dropdown" aria-expanded="false">
                  CONTACTO
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="#">Action</a></li>
                  <li><a class="dropdown-item" href="#">Another action</a></li>
                  <li>
                    <hr class="dropdown-divider">
                  </li>
                  <li><a class="dropdown-item" href="#">Something else here</a></li>
                </ul>
              </li>
              <li class="nav-item dropdown col-3">
                <a class="nav-link dropdown text-light" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
                  aria-expanded="false">
                  EXTENSIONES
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="../html/Talleres.html">Talleres</a></li>
                  <li><a class="dropdown-item" href="../html/Convocatoria.html">Convocatorias</a></li>
                  <li><a class="dropdown-item" href="../html/Ferias.html">Ferias</a></li>
              </li>
            </ul>
          </div>
        </div>
    </nav>
  </div>
<div class="container mt-5">
    <h1 class="titulo">Convocatorias</h1>
    <br>
    

    <input type="text" id="formulario" class="form-control">

    <select  id="select" class="form-select" multiple aria-label="multiple select example" style="display: none">
     
    </select> 
    
    <br>
    <button class="btn btn-info" id="boton">Buscar</button>
    <br>
    <div id="resultado" class="cardz row row-cols-1 row-cols-md-3" >
    </div>
</div>

    <script> 
          const Convocatorias=[
            {nombre:'Programacion',imagen:'../img/Convocatoria1.jfif',id:1},
            {nombre:'Python',imagen:'../img/convocatoria2.jfif',id:2},
            {nombre:'CSS',imagen:'../img/convocatoria3.jfif',id:3},
            {nombre:'Convocatoria1',imagen:'../img/convocatoria4.jfif',id:4},
            {nombre:'Python',imagen:'../img/convocatoria5.jfif',id:5},
            {nombre:'CSS',imagen:'../img/convocatoria6.jfif',id:6}
     ]

        const formulario=document.querySelector('#formulario');
        const select=document.querySelector('#select');
        const boton = document.querySelector('#boton');
        const resultado= document.querySelector('#resultado');
        var busquedas=[];
        var convocatorias = [];

        function eliminarDuplicados(busquedas, busqueda) {
          const indice = busquedas.indexOf(busqueda);
          if (indice > -1) { 
            console.log("Encontro duplicao")
            busquedas.splice(indice, 1);
            return indice
          }
          return -1
          
        }

        var mostrar=()=>{
          resultado.innerHTML='';
            for(let producto of Convocatorias){
                let nombre = producto.nombre.toLowerCase();
                  resultado.innerHTML+=`
                <div id="${producto.id}" class="col mb-4">
                  <div class="card h-100">
                    <img class="card-img-top" src="${producto.imagen}" alt="Card image cap">
                    <div class="card-body">
                      <h5 class="card-title">${producto.nombre}</h5>
                      <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                      <a href="#" class="btn btn-primary">Descargar</a>
                    </div>
                  </div>
                </div>
                  `
            }
            if(resultado.innerHTML=== ''){
                resultado.innerHTML+=`
                <li>Feria no encontrada</li>
                `
            }

        }
        const filtrar=()=>{
          document.getElementById("select").style.display = "none"
            resultado.innerHTML='';
            for(var i=0;i<busquedas.length;i++){
              document.getElementById("op"+i).remove();
            }
            const texto=formulario.value.toLowerCase();
            console.log(busquedas.includes(texto));
            var indiceEliminado = eliminarDuplicados(busquedas,texto);
            busquedas.push(texto);
            console.log(busquedas);
            
            for(var i=0;i<busquedas.length;i++){

              select.innerHTML+=`
              <option id="${"op"+i}">${busquedas[i]}</option>
                `;
            }
            for(let producto of Convocatorias){
                let nombre = producto.nombre.toLowerCase();
                if (nombre.indexOf(texto)!== -1){
                  resultado.innerHTML+=`
                  <div id="${producto.id}" class="col mb-4">
                    <div class="card h-50">
                      <img class="card-img-top" src="${producto.imagen}" alt="Card image cap">
                      <div class="card-body">
                        <h5 class="card-title">${producto.nombre}</h5>
                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                        <a href="#" class="btn btn-primary">Descargar</a>
                      </div>
                    </div>
                  </div>
                  `
                }
            }
            if(resultado.innerHTML=== ''){
                resultado.innerHTML+=`
                <li>Convocatoria no encontrada</li>
                `
            }
        }

        const mostrarSelect = ()=>{
          const texto=formulario.value.toLowerCase();
          for(var i=0;i<convocatorias.length;i++){
              document.getElementById("conv"+i).remove();
          }
          convocatorias = []
          document.getElementById("select").style.display = "block"
          for(let producto of Convocatorias){
                let nombre = producto.nombre.toLowerCase();
                if (nombre.indexOf(texto)!== -1){
                  convocatorias.push(producto.nombre);
                }
          }
          for(var i=0;i<convocatorias.length;i++){
            select.innerHTML+=`
            <option id="${"conv"+i}">${convocatorias[i]}</option>
              `;
          }
        }

        boton.addEventListener('click',filtrar);
        document.getElementById("formulario").addEventListener('input',mostrarSelect)
        mostrar();
    </script>
</body>
</html>
